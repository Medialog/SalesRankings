<!DOCTYPE html>
<html>
    <head>
        <title>Kendo UI DataViz</title>
        <meta charset="UTF-8" />

        <link href="kendo/styles/kendo.dataviz.mobile.min.css" rel="stylesheet" />
        
        <!--Once the final theme is chosen the redundant css reference should removed-->
        <!--<link href="kendo/styles/kendo.dataviz.flat.min.css" rel="stylesheet" />-->
        <link href="kendo/styles/kendo.dataviz.silver.min.css" rel="stylesheet" />
        <link href="kendo/styles/bootstrap.min.css" rel="stylesheet" media="screen">
        <link href="kendo/styles/bootstrap.panel.css" rel="stylesheet" media="screen">
        <link href="kendo/styles/bootstrap-responsive.min.css" rel="stylesheet" media="screen">
        <link href="styles/main.css" rel="stylesheet" />

        <script src="cordova.js"></script>        
        <script src="kendo/js/jquery.min.js"></script>
        
        <script src="kendo/js/kendo.dataviz.mobile.min.js"></script>
        <script src="kendo/js/bootstrap.min.js"></script>
                
        <script src="scripts/app.js"></script>
        <script src="scripts/home.js"></script>
        <script src="scripts/vendor.js"></script>  
        <script src="scripts/vendorImages.js"></script>
        
    </head>
    
    <body>
        
        <!-- General -->
        
        <div id="tabstrip-general" style="background" data-role="view" data-title="Geral" data-model="app.homeService.viewModel"
            data-show="app.homeService.viewModel.initializeViewDesign" data-hide="app.homeService.viewModel.unbindResizeEvent">
            
            <div id="home">
                <div class="container-fluid">
                    <div class="row-fluid">
                        <div class="panel panel-default span3">
                            <div class="panel-heading">
                                <label>Ranking Agosto</label>
                            </div>
                            <div class="panel-body">
                                <div id="VendorRankingByMonthContainer">
                                    <ul data-role="listview" id="VendorRankingByMonthListView" data-bind="source: vendorGrowthLastMonthDataSource" 
                                        data-template="VendorRankingByMonthContainerTmpl">
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="span9">
                            <div class="row-fluid">
                                <div class="panel panel-default span12">
                                    <div class="panel-body">
                                        <div id="clientcolumn-chart"></div>    
                                    </div>
                                </div>
                            </div>
                            <div class="row-fluid">
                                <div class="panel panel-default span4">
                                    <div class="panel-heading">
                                        <label>Crescimento Anual/Cliente</label>
                                    </div>
                                    <div class="panel-body">
                                        <div id="ClientYearGrowthContainer">
                                            <ul data-role="listview" id="ClientYearGrowthListView" data-bind="source: yearGrowthDataSource"
                                                data-template="ClientYearGrowthListViewTmpl">
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="panel panel-default span4">
                                    <div class="panel-heading">
                                        <label>Lucro Mensal/Cliente</label>
                                    </div>
                                    <div class="panel-body">       
                                        <div id="ClientMonthAbsolutePerformanceContainer">
                                            <ul data-role="listview" id="ClientMonthAbsolutePerformanceListView" data-bind="source: absoluteRankingLastMonthDataSource"
                                                data-template="ClientMonthAbsolutePerformanceListViewTmpl">
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="panel panel-default span4">
                                    <div class="panel-heading">
                                        <label>Lucro Anual/Cliente</label>
                                    </div>
                                    <div class="panel-body">
                                        <div id="ClientYearAbsolutePerformanceContainer">
                                            <ul data-role="listview" id="ClientYearAbsolutePerformanceListView" data-bind="source: absoluteRankingDataSource"
                                                data-template="ClientYearAbsolutePerformanceListViewTmpl">
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div> 
                    </div>
                    
                </div>
            </div>
            
        </div>
        
        <!-- End General -->
        
        <!-- Vendor View -->
        
        <div id="tabstrip-vendor" data-layout="vendor-tabstrip" data-role="view" data-title="Vendedor" data-model="app.vendorService.viewModel"
            data-init="app.vendorService.viewModel.initializeViewDesign" data-show="app.vendorService.viewModel.loadData">
            <div id="vendor-home">
                <div class="container-fluid">
                    <div class="row-fluid">
                        <div class=" span6">
                            <div class="row-fluid">
                                <div class="panel panel-default span12">
                                    <div class="panel-heading">
                                        <label>Info</label>
                                    </div>
                                    <div class="panel-body">
                                        <div class="vendorInfoContainer">
                                            <div class="vendorImg" style="width:50px;height:50px;float:left">
                                                <img data-bind="attr: { src: vendorImage}" src="styles/images/default.gif" width="50" height="50" />
                                            </div>
                                            <div class="vendorInfo" style="float:left;margin-left:10px;font-size:11px">
                                                <label class="spanVendorName" style="font-size:11px" data-bind="text: vendorName"></label>
                                                <br />
                                                <div>
                                                    <label style="font-size:11px;" class="spanVendorBestClient" data-bind="text: vendorBestClient"></label>    
                                                </div>
                                                <br />
                                                <div>
                                                    <label style="font-size:11px;" class="spanVendorTotalEarned" data-bind="text: vendorTotalEarned"></label>
                                                </div>
                                                <div>
                                                    <label style="font-size:11px;" class="spanVendorObjective" data-bind="text: vendorObjective"></label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row-fluid">
                                <div class="panel panel-default span4">
                                    <div class="panel-heading">
                                        <label>Variação Mensal</label>
                                    </div>
                                    <div class="panel-body">
                                        <div class="lastMonthVariationContainer">
                                        </div>
                                    </div>
                                </div>
                                <div class="panel panel-default span4">
                                    <div class="panel-heading">
                                        <label>Valor Mensal vs Objectivo</label>
                                    </div>
                                    <div class="panel-body">
                                        <div class="monthRankingByVendorVariationContainer">
                                        </div>
                                    </div>
                                </div>
                                <div class="panel panel-default span4">
                                    <div class="panel-heading">
                                        <label>Rankings</label>
                                    </div>
                                    <div class="panel-body">
                                        <div class="rankingsByVendorContainer">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="panel panel-default span6">
                            <div class="panel-body">
                                <div id="vendorclientscolumn-chart" style="height:350px"></div>
                            </div>
                        </div>
                        
                    </div>                    
                </div>
            </div>
            
            <!-- Popovers -->
                
            <div id="filter-popover" data-role="popover" data-popup='{"height": "30em", "width": "22em"}'>
                <div data-role="view" data-title="Vendedores" data-model="app.vendorService.listViewModel"
                    data-show="app.vendorService.listViewModel.bindVendors">
                    <div data-role="header">
                        <div data-role="navbar">
                            <span data-role="view-title"></span>
                            <a data-role="button" data-align="right" data-click="app.vendorService.listViewModel.closeFilterPopover">X</a>
                        </div>
                    </div>
                    <ul data-role="listview" id="vendorFilterListView" >
                    </ul>
                </div>
            </div>
            
            <!-- End Popovers -->
            
        </div>
        
        <!-- End Vendor View -->
        
        <!-- Templates -->
        
        <script id="VendorRankingByMonthContainerTmpl" type="text/x-kendo-tmpl">
            <div style="float:left;#= Ranking == 1 ? "font-size:14px" : (Ranking == 2 || Ranking == 3 ? "font-size:14px" : "font-size:14px") #">#: Ranking #º</div>
            <div style="margin-left:10px;float:left;#= Ranking<= 3 ? "width:50px;height:50px" : "width:30px;height:30px" #">
                <img src="#: vendorImage(Vendor)#" width="#= Ranking<= 3 ? 50 : 30#" />
            </div>
            <div style="background-image:url(styles/images/gold.png);width:32px;height:32px;position:fixed;margin-top:0px;margin-left:-10px;#= Ranking != 1 ? "display:none" : "" #"></div>
            <div style="background-image:url(styles/images/silver.png);width:32px;height:32px;position:fixed;margin-top:0px;margin-left:-10px;#= Ranking != 2 ? "display:none" : "" #"></div>
            <div style="background-image:url(styles/images/plate.png);width:32px;height:32px;position:fixed;margin-top:0px;margin-left:-10px;#= Ranking != 3 ? "display:none" : "" #"></div>
            
            <div style="margin-left:80px">
                <label title="#:Ranking == 1 ? "Manteve o ranking do mês anterior" : (Ranking==2 || Ranking==3 ? "Subiu 2 posições no ranking": (Ranking==4 ? "Desceu 2 posições no ranking" : "Desceu 3 posições no ranking")) #" style="#:Ranking ==1 ? "color:blue" : (Ranking==2 || Ranking==3 ? "color:green" : "color:red")#" class="position" title="">
                    #:Ranking == 1 ? "=" : (Ranking==2 || Ranking==3 ? "▲ 2": (Ranking==4 ? "▼ 2" : "▼ 3")) #
                </label>
                <a title="Detalhe do vendedor" id="info-vendor" href="\\#tabstrip-vendor?uid=#: Vendor#" data-role="button" style="font-size: 0.6em" data-icon="details"></a>
            </div>
            <div style="clear:both"></div>
            <div style="float:left;#= Ranking==1 ? "font-size:12px;margin-left:12px" : (Ranking==2 || Ranking==3 ? "font-size:10px;margin-left:3px" : "font-size:10px;margin-left:3px") #">
                <div><label style="font-size:11px">#: Vendor #</label></div>
                <div><label style="font-size:11px">Clientes: #: Clients #</label></div>
                <div><label style="font-size:11px">Crescimento: #: Growth #%</label></div>
            </div>
        </script>
        
        <script id="ClientYearGrowthListViewTmpl" type="text/x-kendo-tmpl">
            <label style="#= Ranking == 1 ? "font-size:11px;color:green" : "font-size:9px;"#">#: Ranking + "º - " + Client + "  " + Performed + "%" #</label>
        </script>
        
        <script id="ClientMonthAbsolutePerformanceListViewTmpl" type="text/x-kendo-tmpl">
            <label style="#= Ranking == 1 ? "font-size:11px;color:green" : "font-size:9px;"#">#: Ranking + "º - " + Client + "  " + Sales #</label>
        </script>
        
        <script id="ClientYearAbsolutePerformanceListViewTmpl" type="text/x-kendo-tmpl">
            <label style="#= Ranking == 1 ? "font-size:11px;color:green" : "font-size:9px;"#">#: Ranking + "º - " + Client + "  " + Sales #</label>
        </script>
        
        <script id="vendorFilterListViewTmpl" type="text/x-kendo-tmpl">
            <div>
                <img src="#: vendorImage(Name)#" width="16" height="16">
                <label style="color:\\#4D4D4D;font-size:11px">#: Name #</label><a data-role="detailbutton" data-icon="action"></a>
            </div>
        </script>
        
        <script id="lastMonthVariationTmpl" type="text/x-kendo-tmpl">
            <div style="font-size:11px">
                <label style="font-size:15px; #: (MonthSales - LastMonthSales) < 0 ? "color:red" : "color:green" #">#: (MonthSales - LastMonthSales) < 0 ? "▼" 
                    : ((MonthSales - LastMonthSales) > 0 ? "▲" : "=")# #: (MonthSales - LastMonthSales).toFixed(2) #€</label>
                <label style="font-size:11px">Corrente: #: MonthSales #€</label>
                <label style="font-size:11px">Anterior: #: LastMonthSales #€</label>
            </div>
        </script>
        
        <script id="monthGrowthRankingVariationTmpl" type="text/x-kendo-tmpl">
            <div style="font-size:11px">
                <label style="font-size:15px; #: (MonthRankByTarget - PrevMonthRankByTarget) > 0 ? "color:red" : ( (MonthRankByTarget - PrevMonthRankByTarget) == 0 ? "color:blue" : "color:green") #">#: (MonthRankByTarget - PrevMonthRankByTarget) > 0 ? "▼" 
                    : ((MonthRankByTarget - PrevMonthRankByTarget) < 0 ? "▲" : "=")# #: Math.abs(MonthRankByTarget - PrevMonthRankByTarget) #
                </label>
                <label style="font-size:11px">#: (MonthRankByTarget - PrevMonthRankByTarget) < 0 ? " posições ganhas em relação ao mês anterior" : 
                    ((MonthRankByTarget - PrevMonthRankByTarget) == 0 ? "manteve a mesma posição em relação ao mês anterior" : "posições perdidas em relação ao mês anterior") #</label>
                <label style="font-size:11px">Corrente: #: MonthRankByTarget #º</label>
                <label style="font-size:11px">Anterior: #: PrevMonthRankByTarget #º</label>
            </div>
        </script>
        
        <script id="rankingsByVendorContainerTmpl" type="text/x-kendo-tmpl">
            <div>
                <label style="font-size:11px;float:left;">Vendas: </label>
                <div style="margin-left:10px;height: 20px;float:left">
                    <label style="font-size:11px;">#: OverallRankBySales #º</label>
                </div>
                <div style="float:left">
                    <img src="#: getTrophyImage(OverallRankBySales) #"
                        width="14" height="14" style="#= OverallRankBySales > 3 ? "display:none" : "" #" />    
               </div>
            </div>
            <div style="clear:both"></div>
            <div>
                <label style="font-size:11px;float:left;">Vendas/Objectivo: </label>
                <div style="float:left;margin-left:10px;height: 20px;float:left">
                    <label style="font-size:11px;">#: OverallRankByTarget #º</label> 
                </div>
                <div style="float:left">
                    <img src="#: getTrophyImage(OverallRankByTarget) #"
                        width="14" height="14" style="#= OverallRankByTarget > 3 ? "display:none" : "" #" />
                </div>
            </div>
            <div style="clear:both"></div>
            <div>
                <label style="font-size:11px;float:left;">Vendas mês: </label>
                <div style="float:left;margin-left:10px;height: 20px;float:left">
                    <label style="font-size:11px;">#: OverallRankLastMonth #º</label>
                </div>
                <div style="float:left">
                    <img src="#: getTrophyImage(OverallRankLastMonth) #" 
                        width="14" height="14" style="#= OverallRankLastMonth > 3 ? "display:none" : "" #" />
                </div>
            </div>
            <div style="clear:both"></div>
            <div>
                <label style="font-size:11px;float:left;">Crescimento mês: </label>
                <div style="float:left;margin-left:10px;height: 20px;float:left">
                    <label style="font-size:11px;">#: GrowthRankLastMonthByTarget #º</label>
                </div>
                <div style="float:left">
                    <img src="#: getTrophyImage(GrowthRankLastMonthByTarget) #" 
                        width="14" height="14" style="#= GrowthRankLastMonthByTarget > 3 ? "display:none" : "" #" />
                </div>
            </div>
        </script>
        
        
        <!-- End Templates -->
        
        <!-- Drawers -->
        
        <!-- End Drawers -->

        <!--Layout-->
        
        <div data-role="layout" data-id="vendor-tabstrip">

            <!--Header-->
            <div data-role="header" class="vendor-header">
                <div style="height:100px;z-index:1000;margin-left:5px">
                    <div style="padding:5px;width:70px;height:70px;float:left">
                        <img src="styles/images/app_logo.png" style="width:60px;height:60px"/>
                    </div>
                    <div style="float:left;padding:5px;font-size:15px;margin-top: 1.1em">
                        <span style="color:#4D4D4D">Sales Ranking</span>
                    </div>
                    <div class="view-title-container" style="float:left;text-align: center;width:100%;margin-top:-47px">
                        <span style="color:#4D4D4D;font-size:18px" class="viewTitle">Vendedor</span>
                        <a data-role="button" data-rel="popover" href="#filter-popover" data-icon="search" style="margin-right:10px;float:right"></a>
                    </div>
                </div>
            </div>

            <!--Footer-->
            <div data-role="footer">
                <div style="position:fixed;width:140px;height:46px;z-index:1000;margin-top:5px;margin-left:5px">
                    <div style="padding:5px;width:46px;height:46px;float:left">
                        <img src="styles/images/app_logo.png" style="width:40px;height:40px"/>
                    </div> 
                </div>
                <div data-role="tabstrip">
                    <a href="#tabstrip-general" data-icon="home">Geral</a>
                    <a href="#tabstrip-vendor" data-icon="contacts">Vendedor</a>
                </div>
            </div>

        </div>
        
        <div data-role="layout" data-id="mobile-tabstrip">

            <!--Header-->
            <div data-role="header" class="main-header">
                <div style="height:100px;z-index:1000;margin-left:5px">
                    <div style="padding:5px;width:70px;height:70px;float:left">
                        <img src="styles/images/app_logo.png" style="width:60px;height:60px"/>
                    </div>
                    <div style="float:left;padding:5px;font-size:15px;margin-top: 1.1em">
                        <span style="color:#4D4D4D">Sales Ranking</span>
                    </div>
                    <div class="view-title-container" style="float:left;text-align: center;width:100%;margin-top:-47px">
                        <span style="color:#4D4D4D;font-size:18px" class="viewTitle">Geral</span>
                        <a data-role="button" data-rel="popover" href="#settings-popover" data-icon="settings" style="margin-right:10px;float:right"></a>
                    </div>
                </div>
            </div>

            <!--Footer-->
            <div data-role="footer">
                <div style="position:fixed;width:140px;height:46px;z-index:1000;margin-top:5px;margin-left:5px">
                    <div style="padding:5px;width:46px;height:46px;float:left">
                        <img src="styles/images/app_logo.png" style="width:40px;height:40px"/>
                    </div> 
                </div>
                <div data-role="tabstrip">
                    <a href="#tabstrip-general" data-icon="home">Geral</a>
                    <a href="#tabstrip-vendor" data-icon="contacts">Vendedor</a>
                </div>
            </div>

        </div>
        
        <!-- End Layout -->
        
        <!-- Scripts -->
        
        <!-- End Scripts -->
                
    </body>
</html>
